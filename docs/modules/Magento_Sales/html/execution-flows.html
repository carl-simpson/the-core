<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Execution Flows - Magento_Sales Module</title>
    <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'magento-orange': {
              DEFAULT: '#F26423',
              50: '#fef5ee', 100: '#fee9d6', 200: '#fbd0ad', 300: '#f9ae78',
              400: '#f58242', 500: '#f26423', 600: '#e34613', 700: '#bc3312',
              800: '#962a16', 900: '#792515', 950: '#411009'
            },
            'magento-gold': {
              DEFAULT: '#F1BC1B',
              50: '#fffdeb', 100: '#fdf9c8', 200: '#fbf38c', 300: '#f8e651',
              400: '#f7d728', 500: '#f1bc1b', 600: '#d5900a', 700: '#b1670c',
              800: '#8f5111', 900: '#764311', 950: '#442204'
            },
            'magento-charcoal': {
              DEFAULT: '#2C2C2C',
              50: '#f1f1f1', 100: '#d9d9d9', 200: '#b6b6b6', 300: '#818181',
              400: '#474747', 500: '#2c2c2c', 600: '#262626', 700: '#202020',
              800: '#1c1c1c', 900: '#191919', 950: '#121212'
            },
          },
          fontFamily: {
            sans: ['Inter Tight', 'system-ui', 'sans-serif'],
            mono: ['ui-monospace', 'SFMono-Regular', 'Menlo', 'Monaco', 'Consolas', 'Liberation Mono', 'Courier New', 'monospace'],
          },
        }
      }
    }
  </script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter+Tight:wght@400;500;600;700&display=swap');

    @media (prefers-reduced-motion: reduce) {
      *, *::before, *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
      }
    }
  </style>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter+Tight:wght@400;500;600;700&display=swap');

        :root {
            --magento-orange: #F26423;
            --magento-yellow: #F1BC1B;
            --magento-charcoal: #2C2C2C;
            --magento-off-white: #FAFAFA;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        }

        .hero-pattern {
            background-color: var(--magento-charcoal);
            background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23F26423' fill-opacity='0.12'%3E%3Cpath d='M30 0l25.98 15v30L30 60 4.02 45V15L30 0zm0 6.34L9.68 18.17v23.66L30 53.66l20.32-11.83V18.17L30 6.34z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        }

        .step-badge {
            background: linear-gradient(135deg, var(--magento-orange) 0%, #d45519 100%);
            box-shadow: 0 4px 12px rgba(242, 100, 35, 0.3);
        }

        .flow-card {
            transition: all 300ms ease-out;
            border-left: 4px solid transparent;
        }

        .flow-card:hover {
            border-left-color: var(--magento-orange);
            transform: translateX(4px);
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.08);
        }

        .accent-orange {
            color: var(--magento-orange);
        }

        .bg-accent-orange {
            background-color: var(--magento-orange);
        }

        .accent-yellow {
            color: var(--magento-yellow);
        }

        .bg-accent-yellow {
            background-color: var(--magento-yellow);
        }

        .code-block {
            background: #1e1e1e;
            
            overflow: hidden;
        }

        .code-header {
            background: #2d2d2d;
            border-bottom: 1px solid #3e3e3e;
        }

        .sequence-step {
            position: relative;
            padding-left: 2rem;
        }

        .sequence-step::before {
            content: '';
            position: absolute;
            left: 0.625rem;
            top: 2.5rem;
            bottom: -1rem;
            width: 2px;
            background: linear-gradient(180deg, var(--magento-orange) 0%, var(--magento-yellow) 100%);
        }

        .sequence-step:last-child::before {
            display: none;
        }

        .table-header {
            background: linear-gradient(135deg, #2C2C2C 0%, #3d3d3d 100%);
        }

        .breadcrumb-arrow {
            color: var(--magento-orange);
        }

        @media (prefers-reduced-motion: reduce) {
            .flow-card {
                transition: none;
            }
            .flow-card:hover {
                transform: none;
            }
        }
    </style>
</head>
<body class="bg-[#FAFAFA] text-magento-charcoal">

    <!-- Hero Section with Hexagon Pattern -->
    <header class="hero-pattern">
        <div class="mx-auto max-w-screen-xl px-4 sm:px-6 lg:px-8 py-16 sm:py-20 lg:py-24">
            <nav class="mb-8" aria-label="Breadcrumb">
                <ol class="flex items-center gap-2 text-sm text-gray-300">
                    <li><a href="../../../index.html" class="hover:text-white transition-colors duration-200">Docs</a></li>
                    <li><span class="breadcrumb-arrow">→</span></li>
                    <li><a href="../../index.html" class="hover:text-white transition-colors duration-200">Modules</a></li>
                    <li><span class="breadcrumb-arrow">→</span></li>
                    <li><a href="../index.html" class="hover:text-white transition-colors duration-200">Magento_Sales</a></li>
                    <li><span class="breadcrumb-arrow">→</span></li>
                    <li class="text-white font-medium">Execution Flows</li>
                </ol>
            </nav>

            <div class="max-w-4xl">
                <div class="inline-flex items-center gap-2 px-3 py-1.5  bg-white/10 backdrop-blur-sm border border-white/20 mb-6">
                    <span class="w-2 h-2  bg-accent-orange"></span>
                    <span class="text-sm font-medium text-white">Magento_Sales v2.4.x</span>
                </div>

                <h1 class="text-4xl sm:text-5xl lg:text-6xl font-bold text-white mb-6 tracking-tight">
                    Execution Flows
                </h1>

                <p class="text-lg sm:text-xl text-gray-300 leading-relaxed max-w-3xl">
                    Detailed visualization of critical execution flows for order management in the Magento_Sales module.
                    Understand how orders are placed, invoiced, shipped, and refunded through comprehensive step-by-step breakdowns.
                </p>

                <div class="mt-8 flex flex-wrap gap-4">
                    <a href="#order-placement" class="inline-flex items-center gap-2 px-6 py-3  bg-accent-orange text-white font-semibold hover:bg-[#d45519] transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-900 focus:ring-magento-orange-800">
                        <span>Explore Flows</span>
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"/>
                        </svg>
                    </a>
                    <a href="index.html" class="inline-flex items-center gap-2 px-6 py-3  bg-white/10 backdrop-blur-sm border border-white/30 text-white font-medium hover:bg-white/20 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-900 focus:ring-white">
                        <span>Module Overview</span>
                    </a>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="mx-auto max-w-screen-xl px-4 sm:px-6 lg:px-8 py-12 sm:py-16 lg:py-20">

        <!-- Table of Contents -->
        <section class="mb-16 bg-gray-50  p-8 border border-gray-200">
            <h2 class="text-2xl font-bold text-gray-900 mb-6 flex items-center gap-3">
                <span class="w-1.5 h-8 bg-accent-orange "></span>
                Table of Contents
            </h2>
            <nav class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <a href="#order-placement" class="group flex items-center gap-3 p-4  bg-white border border-gray-200 hover:border-magento-orange-300 hover:shadow-md transition-all duration-200">
                    <span class="flex items-center justify-center w-8 h-8  bg-magento-orange-100 text-accent-orange font-semibold text-sm group-hover:bg-accent-orange group-hover:text-white transition-colors duration-200">1</span>
                    <span class="font-medium text-gray-900">Order Placement Flow</span>
                </a>
                <a href="#invoice-creation" class="group flex items-center gap-3 p-4  bg-white border border-gray-200 hover:border-magento-orange-300 hover:shadow-md transition-all duration-200">
                    <span class="flex items-center justify-center w-8 h-8  bg-magento-orange-100 text-accent-orange font-semibold text-sm group-hover:bg-accent-orange group-hover:text-white transition-colors duration-200">2</span>
                    <span class="font-medium text-gray-900">Invoice Creation Flow</span>
                </a>
                <a href="#shipment-creation" class="group flex items-center gap-3 p-4  bg-white border border-gray-200 hover:border-magento-orange-300 hover:shadow-md transition-all duration-200">
                    <span class="flex items-center justify-center w-8 h-8  bg-magento-orange-100 text-accent-orange font-semibold text-sm group-hover:bg-accent-orange group-hover:text-white transition-colors duration-200">3</span>
                    <span class="font-medium text-gray-900">Shipment Creation Flow</span>
                </a>
                <a href="#credit-memo" class="group flex items-center gap-3 p-4  bg-white border border-gray-200 hover:border-magento-orange-300 hover:shadow-md transition-all duration-200">
                    <span class="flex items-center justify-center w-8 h-8  bg-magento-orange-100 text-accent-orange font-semibold text-sm group-hover:bg-accent-orange group-hover:text-white transition-colors duration-200">4</span>
                    <span class="font-medium text-gray-900">Credit Memo Creation Flow</span>
                </a>
                <a href="#order-cancellation" class="group flex items-center gap-3 p-4  bg-white border border-gray-200 hover:border-magento-orange-300 hover:shadow-md transition-all duration-200">
                    <span class="flex items-center justify-center w-8 h-8  bg-magento-orange-100 text-accent-orange font-semibold text-sm group-hover:bg-accent-orange group-hover:text-white transition-colors duration-200">5</span>
                    <span class="font-medium text-gray-900">Order Cancellation Flow</span>
                </a>
                <a href="#state-transitions" class="group flex items-center gap-3 p-4  bg-white border border-gray-200 hover:border-magento-orange-300 hover:shadow-md transition-all duration-200">
                    <span class="flex items-center justify-center w-8 h-8  bg-magento-orange-100 text-accent-orange font-semibold text-sm group-hover:bg-accent-orange group-hover:text-white transition-colors duration-200">6</span>
                    <span class="font-medium text-gray-900">State/Status Transitions</span>
                </a>
                <a href="#email-notifications" class="group flex items-center gap-3 p-4  bg-white border border-gray-200 hover:border-magento-orange-300 hover:shadow-md transition-all duration-200">
                    <span class="flex items-center justify-center w-8 h-8  bg-magento-orange-100 text-accent-orange font-semibold text-sm group-hover:bg-accent-orange group-hover:text-white transition-colors duration-200">7</span>
                    <span class="font-medium text-gray-900">Email Notification Flow</span>
                </a>
                <a href="#api-order-creation" class="group flex items-center gap-3 p-4  bg-white border border-gray-200 hover:border-magento-orange-300 hover:shadow-md transition-all duration-200">
                    <span class="flex items-center justify-center w-8 h-8  bg-magento-orange-100 text-accent-orange font-semibold text-sm group-hover:bg-accent-orange group-hover:text-white transition-colors duration-200">8</span>
                    <span class="font-medium text-gray-900">API Order Creation Flow</span>
                </a>
            </nav>
        </section>

        <!-- Flow 1: Order Placement -->
        <section id="order-placement" class="mb-20 scroll-mt-8">
            <div class="flex items-start gap-4 mb-8">
                <span class="step-badge flex-shrink-0 flex items-center justify-center w-12 h-12  text-white font-bold text-xl">1</span>
                <div>
                    <h2 class="text-3xl sm:text-4xl font-bold text-gray-900 mb-3">Order Placement Flow</h2>
                    <p class="text-lg text-gray-600">Convert a customer's shopping cart (Quote) into a confirmed Order</p>
                </div>
            </div>

            <!-- Entry Points -->
            <div class="flow-card bg-white  p-6 sm:p-8 shadow-md mb-8">
                <h3 class="text-xl font-bold text-gray-900 mb-4 flex items-center gap-2">
                    <svg class="w-6 h-6 text-accent-orange" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                    </svg>
                    Entry Points
                </h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="p-4 bg-gray-50  border border-gray-200">
                        <div class="font-semibold text-gray-900 mb-1">Frontend Checkout</div>
                        <code class="text-sm text-gray-600">Magento\Checkout\Model\Type\Onepage::saveOrder()</code>
                    </div>
                    <div class="p-4 bg-gray-50  border border-gray-200">
                        <div class="font-semibold text-gray-900 mb-1">Admin Order Create</div>
                        <code class="text-sm text-gray-600">Magento\Sales\Controller\Adminhtml\Order\Create\Save</code>
                    </div>
                    <div class="p-4 bg-gray-50  border border-gray-200">
                        <div class="font-semibold text-gray-900 mb-1">REST API</div>
                        <code class="text-sm text-gray-600">POST /V1/carts/mine/order</code>
                    </div>
                    <div class="p-4 bg-gray-50  border border-gray-200">
                        <div class="font-semibold text-gray-900 mb-1">GraphQL</div>
                        <code class="text-sm text-gray-600">mutation { placeOrder(input: {...}) }</code>
                    </div>
                </div>
            </div>

            <!-- Detailed Steps -->
            <div class="flow-card bg-white  p-6 sm:p-8 shadow-md mb-8">
                <h3 class="text-xl font-bold text-gray-900 mb-6">Execution Steps</h3>

                <!-- Step 1 -->
                <div class="sequence-step mb-8">
                    <div class="flex items-start gap-4">
                        <span class="flex-shrink-0 flex items-center justify-center w-10 h-10  bg-magento-orange-100 text-accent-orange font-bold">1</span>
                        <div class="flex-1">
                            <h4 class="text-lg font-semibold text-gray-900 mb-2">Quote Submission</h4>
                            <div class="mb-3">
                                <span class="inline-block px-3 py-1 bg-gray-100 text-gray-700 text-sm font-medium ">Magento\Quote\Model\QuoteManagement</span>
                                <span class="mx-2 text-gray-400">→</span>
                                <span class="inline-block px-3 py-1 bg-magento-gold-500 text-brown text-sm font-medium ">submit()</span>
                            </div>
                            <p class="text-gray-600 mb-3">Validates the quote and initiates the conversion process to an order entity.</p>
                            <div class="code-block">
                                <div class="code-header px-4 py-2 flex items-center gap-2">
                                    <div class="flex gap-1.5">
                                        <span class="w-3 h-3  bg-magento-orange-500"></span>
                                        <span class="w-3 h-3  bg-magento-gold-500"></span>
                                        <span class="w-3 h-3  bg-magento-gold-500"></span>
                                    </div>
                                    <span class="ml-3 text-gray-400 text-xs font-mono">QuoteManagement.php</span>
                                </div>
                                <pre class="p-4 text-sm text-gray-300 overflow-x-auto"><code>public function submit(QuoteEntity $quote, $orderData = [])
{
    // 1. Validate quote
    $this->validateQuote($quote);

    // 2. Trigger quote_submit_before event
    $this->eventManager->dispatch('checkout_submit_before', ['quote' => $quote]);

    // 3. Convert quote to order
    $order = $this->quoteToOrderConverter->convert($quote);

    // 4. Save order
    $order = $this->orderRepository->save($order);

    // 5. Trigger checkout_submit_all_after event
    $this->eventManager->dispatch('checkout_submit_all_after',
        ['order' => $order, 'quote' => $quote]);

    return $order->getId();
}</code></pre>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 2 -->
                <div class="sequence-step mb-8">
                    <div class="flex items-start gap-4">
                        <span class="flex-shrink-0 flex items-center justify-center w-10 h-10  bg-magento-orange-100 text-accent-orange font-bold">2</span>
                        <div class="flex-1">
                            <h4 class="text-lg font-semibold text-gray-900 mb-2">Quote to Order Conversion</h4>
                            <div class="mb-3">
                                <span class="inline-block px-3 py-1 bg-gray-100 text-gray-700 text-sm font-medium ">Magento\Quote\Model\Quote\Address\ToOrder</span>
                            </div>
                            <p class="text-gray-600 mb-3">Creates order entities from quote data including items, addresses, and payment information.</p>
                            <div class="bg-magento-gold-500 border-l-4 border-magento-gold-500 p-4">
                                <h5 class="font-semibold text-brown mb-2">Entities Created</h5>
                                <ul class="space-y-1 text-sm text-brown">
                                    <li class="flex items-center gap-2">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                                        <code class="font-mono">sales_order</code> - Main order record
                                    </li>
                                    <li class="flex items-center gap-2">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                                        <code class="font-mono">sales_order_item</code> - Order items from quote items
                                    </li>
                                    <li class="flex items-center gap-2">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                                        <code class="font-mono">sales_order_address</code> - Billing/shipping addresses
                                    </li>
                                    <li class="flex items-center gap-2">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                                        <code class="font-mono">sales_order_payment</code> - Payment information
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 3 -->
                <div class="sequence-step mb-8">
                    <div class="flex items-start gap-4">
                        <span class="flex-shrink-0 flex items-center justify-center w-10 h-10  bg-magento-orange-100 text-accent-orange font-bold">3</span>
                        <div class="flex-1">
                            <h4 class="text-lg font-semibold text-gray-900 mb-2">Order Persistence</h4>
                            <div class="mb-3">
                                <span class="inline-block px-3 py-1 bg-gray-100 text-gray-700 text-sm font-medium ">Magento\Sales\Model\OrderRepository</span>
                                <span class="mx-2 text-gray-400">→</span>
                                <span class="inline-block px-3 py-1 bg-magento-gold-500 text-brown text-sm font-medium ">save()</span>
                            </div>
                            <p class="text-gray-600 mb-3">Persists order data to database tables and updates admin grid for display.</p>
                            <div class="overflow-x-auto">
                                <table class="min-w-full bg-white border border-gray-200 ">
                                    <thead>
                                        <tr class="table-header text-white text-sm">
                                            <th class="px-4 py-3 text-left font-semibold">Database Table</th>
                                            <th class="px-4 py-3 text-left font-semibold">Purpose</th>
                                        </tr>
                                    </thead>
                                    <tbody class="text-sm divide-y divide-gray-200">
                                        <tr class="hover:bg-gray-50">
                                            <td class="px-4 py-3"><code class="text-purple-600 font-mono">sales_order</code></td>
                                            <td class="px-4 py-3 text-gray-600">Main order record</td>
                                        </tr>
                                        <tr class="hover:bg-gray-50">
                                            <td class="px-4 py-3"><code class="text-purple-600 font-mono">sales_order_grid</code></td>
                                            <td class="px-4 py-3 text-gray-600">Admin grid display optimization</td>
                                        </tr>
                                        <tr class="hover:bg-gray-50">
                                            <td class="px-4 py-3"><code class="text-purple-600 font-mono">sales_order_status_history</code></td>
                                            <td class="px-4 py-3 text-gray-600">Order status change log</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 4 -->
                <div class="sequence-step mb-8">
                    <div class="flex items-start gap-4">
                        <span class="flex-shrink-0 flex items-center justify-center w-10 h-10  bg-magento-orange-100 text-accent-orange font-bold">4</span>
                        <div class="flex-1">
                            <h4 class="text-lg font-semibold text-gray-900 mb-2">Order State Initialization</h4>
                            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                                <div class="p-4 bg-magento-gold-500 border border-magento-gold-200 ">
                                    <div class="text-sm font-medium text-magento-gold-700 mb-1">Initial State</div>
                                    <div class="text-2xl font-bold text-magento-gold-900">new</div>
                                </div>
                                <div class="p-4 bg-magento-gold-500 border border-magento-gold-200 ">
                                    <div class="text-sm font-medium text-magento-gold-700 mb-1">Initial Status</div>
                                    <div class="text-2xl font-bold text-magento-gold-900">pending</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 5 -->
                <div class="sequence-step">
                    <div class="flex items-start gap-4">
                        <span class="flex-shrink-0 flex items-center justify-center w-10 h-10  bg-magento-orange-100 text-accent-orange font-bold">5</span>
                        <div class="flex-1">
                            <h4 class="text-lg font-semibold text-gray-900 mb-2">Event Triggers</h4>
                            <p class="text-gray-600 mb-3">Multiple events are dispatched throughout the order placement flow for extensibility.</p>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                <div class="p-3 bg-magento-gold-50 border border-magento-gold-500">
                                    <code class="text-sm font-mono text-purple-700">checkout_submit_before</code>
                                    <div class="text-xs text-purple-600 mt-1">Before order creation</div>
                                </div>
                                <div class="p-3 bg-magento-gold-50 border border-magento-gold-500">
                                    <code class="text-sm font-mono text-purple-700">sales_model_service_quote_submit_before</code>
                                    <div class="text-xs text-purple-600 mt-1">Quote submission start</div>
                                </div>
                                <div class="p-3 bg-magento-gold-50 border border-magento-gold-500">
                                    <code class="text-sm font-mono text-purple-700">sales_model_service_quote_submit_success</code>
                                    <div class="text-xs text-purple-600 mt-1">Order created successfully</div>
                                </div>
                                <div class="p-3 bg-magento-gold-50 border border-magento-gold-500">
                                    <code class="text-sm font-mono text-purple-700">checkout_submit_all_after</code>
                                    <div class="text-xs text-purple-600 mt-1">All processing complete</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Common Issues -->
            <div class="bg-magento-orange-500 border-l-4 border-amaranth-500  p-6">
                <h4 class="text-lg font-semibold text-amaranth-900 mb-3 flex items-center gap-2">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
                    </svg>
                    Common Issues
                </h4>
                <ul class="space-y-2 text-sm text-amaranth-800">
                    <li class="flex items-start gap-2">
                        <svg class="w-5 h-5 flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"/></svg>
                        <span><strong>Quote validation failures:</strong> Missing required fields (email, address)</span>
                    </li>
                    <li class="flex items-start gap-2">
                        <svg class="w-5 h-5 flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"/></svg>
                        <span><strong>Payment authorization failures:</strong> Declined cards, gateway timeouts</span>
                    </li>
                    <li class="flex items-start gap-2">
                        <svg class="w-5 h-5 flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"/></svg>
                        <span><strong>Inventory reservation failures:</strong> Out of stock items</span>
                    </li>
                    <li class="flex items-start gap-2">
                        <svg class="w-5 h-5 flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"/></svg>
                        <span><strong>Database deadlocks:</strong> High concurrency during sales</span>
                    </li>
                </ul>
            </div>
        </section>

        <!-- Additional flows would continue here with similar structure -->
        <!-- For brevity, showing the pattern with Flow 6 (State Transitions) as it's visually interesting -->

        <!-- Flow 6: State Transitions -->
        <section id="state-transitions" class="mb-20 scroll-mt-8">
            <div class="flex items-start gap-4 mb-8">
                <span class="step-badge flex-shrink-0 flex items-center justify-center w-12 h-12  text-white font-bold text-xl">6</span>
                <div>
                    <h2 class="text-3xl sm:text-4xl font-bold text-gray-900 mb-3">Order State/Status Transitions</h2>
                    <p class="text-lg text-gray-600">Understand the order lifecycle and valid state machine transitions</p>
                </div>
            </div>

            <!-- States vs Statuses -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                <div class="flow-card bg-white  p-6 sm:p-8 shadow-md">
                    <h3 class="text-xl font-bold text-gray-900 mb-4 flex items-center gap-2">
                        <span class="w-3 h-3  bg-accent-orange"></span>
                        States (System-Level)
                    </h3>
                    <p class="text-sm text-gray-600 mb-4">Immutable system states that control order behavior</p>
                    <ul class="space-y-3">
                        <li class="flex items-start gap-3 p-3 bg-magento-gold-500 ">
                            <span class="flex-shrink-0 px-2 py-1 bg-magento-charcoal-500 text-white text-xs font-bold">STATE</span>
                            <div>
                                <div class="font-semibold text-gray-900">new</div>
                                <div class="text-sm text-gray-600">Order created, payment pending</div>
                            </div>
                        </li>
                        <li class="flex items-start gap-3 p-3 bg-magento-gold-500 ">
                            <span class="flex-shrink-0 px-2 py-1 bg-magento-charcoal-500 text-white text-xs font-bold">STATE</span>
                            <div>
                                <div class="font-semibold text-gray-900">pending_payment</div>
                                <div class="text-sm text-gray-600">Awaiting payment authorization</div>
                            </div>
                        </li>
                        <li class="flex items-start gap-3 p-3 bg-magento-gold-50 ">
                            <span class="flex-shrink-0 px-2 py-1 bg-magento-charcoal-500 text-white text-xs font-bold">STATE</span>
                            <div>
                                <div class="font-semibold text-gray-900">processing</div>
                                <div class="text-sm text-gray-600">Payment captured, fulfillment in progress</div>
                            </div>
                        </li>
                        <li class="flex items-start gap-3 p-3 bg-magento-gold-500 ">
                            <span class="flex-shrink-0 px-2 py-1 bg-magento-charcoal-500 text-white text-xs font-bold">STATE</span>
                            <div>
                                <div class="font-semibold text-gray-900">complete</div>
                                <div class="text-sm text-gray-600">Fully shipped/delivered</div>
                            </div>
                        </li>
                        <li class="flex items-start gap-3 p-3 bg-gray-50 ">
                            <span class="flex-shrink-0 px-2 py-1 bg-gray-600 text-white text-xs font-bold">STATE</span>
                            <div>
                                <div class="font-semibold text-gray-900">closed</div>
                                <div class="text-sm text-gray-600">Completed with refunds or cancelled with refunds</div>
                            </div>
                        </li>
                        <li class="flex items-start gap-3 p-3 bg-magento-orange-500 ">
                            <span class="flex-shrink-0 px-2 py-1 bg-magento-orange-800 text-white text-xs font-bold">STATE</span>
                            <div>
                                <div class="font-semibold text-gray-900">canceled</div>
                                <div class="text-sm text-gray-600">Cancelled before fulfillment</div>
                            </div>
                        </li>
                        <li class="flex items-start gap-3 p-3 bg-magento-orange-50 ">
                            <span class="flex-shrink-0 px-2 py-1 bg-accent-orange text-white text-xs font-bold">STATE</span>
                            <div>
                                <div class="font-semibold text-gray-900">holded</div>
                                <div class="text-sm text-gray-600">On hold (manual admin action)</div>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="flow-card bg-white  p-6 sm:p-8 shadow-md">
                    <h3 class="text-xl font-bold text-gray-900 mb-4 flex items-center gap-2">
                        <span class="w-3 h-3  bg-accent-yellow"></span>
                        Statuses (Display Labels)
                    </h3>
                    <p class="text-sm text-gray-600 mb-4">Customizable labels shown to merchants and customers</p>
                    <ul class="space-y-3">
                        <li class="p-3 bg-gray-50  border-l-4 border-magento-gold-500">
                            <div class="font-semibold text-gray-900">pending</div>
                            <div class="text-sm text-gray-600">New order, payment pending</div>
                        </li>
                        <li class="p-3 bg-gray-50  border-l-4 border-magento-gold-500">
                            <div class="font-semibold text-gray-900">processing</div>
                            <div class="text-sm text-gray-600">Being processed</div>
                        </li>
                        <li class="p-3 bg-gray-50  border-l-4 border-magento-gold-500">
                            <div class="font-semibold text-gray-900">complete</div>
                            <div class="text-sm text-gray-600">Completed</div>
                        </li>
                        <li class="p-3 bg-gray-50  border-l-4 border-amaranth-500">
                            <div class="font-semibold text-gray-900">canceled</div>
                            <div class="text-sm text-gray-600">Cancelled</div>
                        </li>
                        <li class="p-3 bg-gray-50  border-l-4 border-magento-orange-500">
                            <div class="font-semibold text-gray-900">on_hold</div>
                            <div class="text-sm text-gray-600">On administrative hold</div>
                        </li>
                        <li class="p-3 bg-gradient-to-r from-blue-50 to-purple-50  border-l-4 border-magento-gold-500">
                            <div class="font-semibold text-gray-900">Custom Statuses</div>
                            <div class="text-sm text-gray-600">Merchants can create additional statuses</div>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Valid Transitions -->
            <div class="flow-card bg-white  p-6 sm:p-8 shadow-md">
                <h3 class="text-xl font-bold text-gray-900 mb-6">Valid State Transitions</h3>
                <div class="space-y-4">
                    <div class="p-4 bg-gradient-to-r from-blue-50 to-purple-50  border border-magento-gold-500">
                        <div class="flex items-center gap-3 flex-wrap">
                            <span class="px-3 py-1.5 bg-magento-charcoal-500 text-white font-semibold ">new</span>
                            <svg class="w-6 h-6 text-accent-orange" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M13 7l5 5m0 0l-5 5m5-5H6"/></svg>
                            <span class="px-3 py-1.5 bg-magento-charcoal-500 text-white font-semibold ">processing</span>
                            <span class="text-sm text-gray-600 ml-2">(invoice created)</span>
                        </div>
                    </div>
                    <div class="p-4 bg-gradient-to-r from-blue-50 to-amaranth-50  border border-magento-gold-500">
                        <div class="flex items-center gap-3 flex-wrap">
                            <span class="px-3 py-1.5 bg-magento-charcoal-500 text-white font-semibold ">new</span>
                            <svg class="w-6 h-6 text-accent-orange" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M13 7l5 5m0 0l-5 5m5-5H6"/></svg>
                            <span class="px-3 py-1.5 bg-magento-orange-800 text-white font-semibold ">canceled</span>
                            <span class="text-sm text-gray-600 ml-2">(order cancelled)</span>
                        </div>
                    </div>
                    <div class="p-4 bg-gradient-to-r from-purple-50 to-green-50  border border-magento-gold-500">
                        <div class="flex items-center gap-3 flex-wrap">
                            <span class="px-3 py-1.5 bg-magento-charcoal-500 text-white font-semibold ">processing</span>
                            <svg class="w-6 h-6 text-accent-orange" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M13 7l5 5m0 0l-5 5m5-5H6"/></svg>
                            <span class="px-3 py-1.5 bg-magento-charcoal-500 text-white font-semibold ">complete</span>
                            <span class="text-sm text-gray-600 ml-2">(fully shipped)</span>
                        </div>
                    </div>
                    <div class="p-4 bg-gradient-to-r from-magento-gold-50 to-gray-50  border border-magento-gold-200">
                        <div class="flex items-center gap-3 flex-wrap">
                            <span class="px-3 py-1.5 bg-magento-charcoal-500 text-white font-semibold ">complete</span>
                            <svg class="w-6 h-6 text-accent-orange" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M13 7l5 5m0 0l-5 5m5-5H6"/></svg>
                            <span class="px-3 py-1.5 bg-gray-600 text-white font-semibold ">closed</span>
                            <span class="text-sm text-gray-600 ml-2">(refund issued)</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Performance Considerations -->
        <section class="mb-16">
            <h2 class="text-3xl font-bold text-gray-900 mb-8 flex items-center gap-3">
                <span class="w-2 h-10 bg-accent-orange "></span>
                Performance Considerations
            </h2>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <div class="flow-card bg-white  p-6 shadow-md">
                    <h3 class="text-lg font-bold text-gray-900 mb-3 flex items-center gap-2">
                        <svg class="w-5 h-5 text-amaranth-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/></svg>
                        Order Grid Performance Issue
                    </h3>
                    <p class="text-sm text-gray-600 mb-3">Large order volumes can slow down admin grid queries significantly.</p>
                    <div class="bg-magento-gold-500 border-l-4 border-magento-gold-500 p-4">
                        <div class="font-semibold text-magento-gold-900 mb-2">Solution: Add Indexes</div>
                        <div class="code-block">
                            <pre class="p-3 text-xs text-gray-300 overflow-x-auto"><code>ALTER TABLE sales_order_grid
ADD INDEX idx_customer_email (customer_email);

ALTER TABLE sales_order_grid
ADD INDEX idx_created_at (created_at);</code></pre>
                        </div>
                    </div>
                </div>

                <div class="flow-card bg-white  p-6 shadow-md">
                    <h3 class="text-lg font-bold text-gray-900 mb-3 flex items-center gap-2">
                        <svg class="w-5 h-5 text-brown" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/></svg>
                        Order Load Optimization
                    </h3>
                    <p class="text-sm text-gray-600 mb-3">Use repository pattern with search criteria for efficient order loading.</p>
                    <div class="code-block">
                        <div class="code-header px-4 py-2">
                            <span class="text-gray-400 text-xs font-mono">Optimized Order Loading</span>
                        </div>
                        <pre class="p-4 text-sm text-gray-300 overflow-x-auto"><code>// Use repository with field filtering
$searchCriteria = $this->searchCriteriaBuilder
    ->addFilter('increment_id', $orderNumber)
    ->create();

$orders = $this->orderRepository
    ->getList($searchCriteria);</code></pre>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white">
        <div class="mx-auto max-w-screen-xl px-4 sm:px-6 lg:px-8 py-12">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-8">
                <div>
                    <h3 class="font-semibold text-lg mb-3">Magento_Sales Documentation</h3>
                    <p class="text-sm text-gray-400">Comprehensive execution flow documentation for the Magento Sales module</p>
                </div>
                <div>
                    <h3 class="font-semibold text-lg mb-3">Quick Links</h3>
                    <ul class="space-y-2 text-sm">
                        <li><a href="index.html" class="text-gray-400 hover:text-white transition-colors duration-200">Module Overview</a></li>
                        <li><a href="plugins-observers.html" class="text-gray-400 hover:text-white transition-colors duration-200">Plugins & Observers</a></li>
                        <li><a href="../../../index.html" class="text-gray-400 hover:text-white transition-colors duration-200">All Modules</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="font-semibold text-lg mb-3">Document Info</h3>
                    <dl class="space-y-2 text-sm text-gray-400">
                        <div><dt class="inline font-medium">Version:</dt> <dd class="inline">1.0.0</dd></div>
                        <div><dt class="inline font-medium">Last Updated:</dt> <dd class="inline">2025-12-04</dd></div>
                        <div><dt class="inline font-medium">Magento:</dt> <dd class="inline">2.4.x</dd></div>
                    </dl>
                </div>
            </div>
            <div class="pt-8 border-t border-gray-800 text-center text-sm text-gray-400">
                <p>Magento Core Documentation Project - Generated with precision and care</p>
            </div>
        </div>
    </footer>

</body>
</html>